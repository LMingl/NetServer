![](images\服务器框架.png)

### 网络协议：



### IO处理单元
我设计的完成的主要任务：
1.等待并接收新的客户的连接
2.
#### 事件处理模式
服务器程序通常需要处理三类事件：IO事件、信号及定时事件

事件处理模式：
- 同步IO模型 Reactor 
- 异步IO模型 Proactor

Reactor模式，它要求主线程（IO处理单元）只负责监听文件描述符上是否有事件发生，有的话立即将该事件通知工作线程（逻辑单元），除此之外主线程不做任何其他实质性的工作。读写数据，接收新的连接，以及处理客户请求均在工作线程中完成
工作流程：p128
Proactor模式，将所有IO操作交给主线程和内核来处理，工作线程仅仅负责业务逻辑

### 逻辑单元
我设计主要完成的任务：
1.接收分析处理客户数据
2.将结果传递给IO处理单元或直接发送给客户

#### 并发模式
并发模式是指I/O单元和多个逻辑单元之间协调完成任务的方法

服务器主要有两种并发编程模式：
- 半同步/半异步模式，
- 领导者/追随者模式

并发模式中，“同步”指的是程序完全按照代码序列的顺序执行；“异步”指的是程序的执行需要由系统事件来驱动。常见的系统事件包括中断、信号等
半同步/半异步模式中，同步线程用于处理客户逻辑；异步线程用于处理IO事件

池：
池是一组资源的集合，这组资源在服务器启动之初就被完全创建好并初始化，这称为静态资源分配，当服务器进入正式的运行阶段，即开始处理客户请求时，如果他需要相关的资源，就可以直接从池中获取，无需动态分配。
根据不同的资源类型，池可以分为多种，常见的有内存池、进程池、线程池、连接池。
当我们需要一个工作进程或工作线程来处理新到的客户请求时，我们可以直**接从进程池或线程池取得一个执行实体**，而无需动态的调用fork或pthread_create等函数创建进程或线程
连接池通常用于服务器或服务器集群的内部永久连接。

数据复制：两个进程之间要传递大量的数据时，我们就应该考虑使用共享内存，用指针指出每一行在buff中的位置，而不是复制到另一个缓冲区

### 存储单元 
采用连接池的方式
每个逻辑单元可能都需要频繁的访问本地的某个数据库。
解决方案是使用连接池。连接池是服务器和数据库建立的一组连接的集合。当某个逻辑单元需要访问数据库时，它可以直接从连接池中取得一个连接的实体并使用之。待完成数据库的访问后，逻辑单元将该链接返回连接池
我设计的主要完成的任务：
1.
2.

#### 数据库


